| 档案编号| 作者| 提案时间 | 状态 |
|:----:|:----:|:----:|:----:|
|〔刍议06〕| DemoHn | 2020-12-20 | 设计中 |

## 简介

本草案主要为 Zn 内置的数组类型定义内置属性及方法。

数组、列表作为 Zn 基本类型的一部分，为用户提供了管理一系列数据的能力。而就目前的语法而言，Zn 只能做到定义数组/列表及读取/设置某一个元素的功能。这显然远远不够，因此我们需要定义更多的属性和方法使得用户能够对数组/列表进行更加丰富的操作及变换。

> 随便试水下如何写 Zn 的 API文档。

## 符号定义

1. 属性定义

    每一个属性将以 `之 ‹属性名›` 的形式描述。其中：前面的 `之` 字将以斜体表示，空一格之后再是属性名（以代码字体表示）。如 _之_ `长度` 。另起一行，辅之以属性描述。自然，`之` 字并不算在属性名后面。

    某些属性可能有一到数个别名，属性的别名以上标 `又` 表示，而后跟随属性名称。如 _之_ `首`，<sup>又</sup> `首项`。

2. 方法定义

    每一个方法都是公开方法，因此直接以 `之 （‹方法名›：‹参数1›，‹参数2›，...）` 表示即可。空一格之后再用一对 `（）` 括住，个中描述了方法名以及参数列表。如 _之_ `（添加：‹元素1›）`

## 数组内置属性及方法

### 属性篇

> 直接使用 `数组 之 属性名` 即可。

**基本信息类**

- _之_ `首`， <sup>又</sup> `首项` ， <sup>又</sup> `第一项`

  * 返回数组里面第一项的值。如果数组为空，则返回 `空`。_可以设置_
  
  > `【“春”，“夏”，“秋”，“冬”】之首   ->  「春」`

- _之_ `尾`， <sup>又</sup> `末项` ， <sup>又</sup> `最后项`

  * 返回数组里面最后一项的值。如果数组为空，则返回 `空`。_可以设置_
  
  > `【“春”，“夏”，“秋”，“冬”】之尾   ->  「冬」`

- _之_ `数目`，<sup>又</sup> `长度`
  
  * 返回数组里面的元素个数。返回值类型为数值。
  
  > `【“春”，“夏”，“秋”，“冬”】之数目   ->  4`
 
**对象转换类**

- _之_ `文本*`

  * 将数组转换成为文本类型。注意后面的 `*` 也是属性名称的一部分。

  > `【“春”，“夏”，“秋”，“冬”】之文本*   ->  「【「春」，「夏」，「秋」，「冬」】」`

- _之_ `逆`

  * 生成一个新的数组，其元素顺序为原来数组的逆序。

  > `【“春”，“夏”，“秋”，“冬”】之逆   ->  【「冬」，「秋」，「夏」，「春」】`

**数值运算类**

- _之_ `和`
  
  * 返回类型：_数值_
  * 当数组内的 **所有** 元素都是 _数值型_ 时，返回此数组所有元素的和；否则返回类型错误。同时此数组需要至少一个参数。
  
  > `【2，3，5，7】之和   ->  17`

- _之_ `差`

  * 返回类型：_数值_
  * 当数组内的 **所有** 元素都是 _数值型_ 时，返回此数组第一项元素与 ‘之后所有元素之和’ 之差，亦即第一项减去后面所有项的结果；否则返回类型错误。同时此数组需要至少一个参数。
  
  > `【2，8】之差   ->   -6`

- _之_ `积`

  * 返回类型：_数值_
  * 当数组内的 **所有** 元素都是 _数值型_ 时，返回所有元素的乘积；否则返回类型错误。同时此数组需要至少一个参数。
  
  > `【2，8】之积   ->   16`

- _之_ `商`

  * 返回类型：_数值_
  * 当数组内的 **所有** 元素都是 _数值型_ 时，返回此数组第一项元素与 ‘之后所有元素之积’ 之商，亦即第一项连续除上后面所有项的结果。注意：除第一项外，后面所有项的值不得为0。
  
  > `【32，8】之商   ->   4`

### 方法篇

**元素操作**

- _之_ `（新增：‹元素X›，‹索引›）`，<sup>又</sup> `添加`

  * 对于某一个数组，将元素置入此数组中，使得新数组的对应 `‹索引›` 的元素值为 `‹元素X›`。亦即 `insert`。返回新数组的引用。

    不过有两点例外：
      - 当索引值大于当前数组的长度时，新增元素仍然会在数组的最后添加，不会和指定的索引值完全对应。
      - 当索引值为负数时，新增元素会在数组的倒数第 `-N` 项中添加，新数组的索引值为 `数组之长度 + 索引 + 1`，例如 `【“一”，“二”，“三”】之（新增：“四”，-1）   ->  【“一”，“二”，“四”，“三”】`，可以注意到元素 `“四”` 的索引值为 `3 + -1 + 1 = 3`，所以元素 `“四”` 就像是在数组的倒数第一项之前插入一样。

    > 💡 这里可以用 `以` 的语法，将 `‹索引›` 提前至括号前，如 `【“春”，“秋”】之以 0（新增：“夏”）`

    > `【6，9】之（新增：54，1）   ->   【6，54，9】`

- _之_ `（前增：‹元素X›）`

  * 对于某一个数组，将元素X置入其第一项之前，使得置入的元素成为新数组的第一项元素。亦即 `prepend`。返回新数组的引用。实际上等同于 `（新增：‹元素X›，0）`

  > `【6，9】之（前增：3）   ->   【3，6，9】`

- _之_ `（后增：‹元素X›）`

  * 对于某一个数组，将元素X置入其最后一项之后，使得置入的元素成为新数组的最后一项元素。亦即 `append`。返回新数组的引用。实际上等同于 `（新增：‹元素X›，数组之长度）`

  > `【6，9】之（后增：3）   ->   【6，9，3】`

- _之_ `（左移）`

  * 对于某一个数组，将第一项元素剔除出数组。返回被剔除的元素。亦即 `shift`。

  > 此处 “左移” 应作何解？我们不妨想象有一张桌子，桌子上面从左到右依次摆放着积木（元素）。现在我们站在这排积木的右边，把它往左推移一格，使得最左边的积木（元素）从桌子上掉下去。那么，这个掉下去的积木就是返回值，而留在桌面上的那排积木就少了一个元素。

  > `令A为【3，6，9】；A之（左移）  ->    3`
  > `A -> 【6，9】`

- _之_ `（右移）`

  * 对于某一个数组，将最后一项元素剔除出数组。返回被剔除的元素。亦即 `pop`。

  > `令A为【3，6，9】；A之（右移）  ->   9`
  > `A -> 【3，6】`

- _之_ `（连接：‹连接符›）`

  * 用 `‹连接符›` 将数组里的所有元素连接起来，返回连接之后的字符串。注意：数组里的每一个元素需要为文本型。

  > `【“春”，“夏”，“秋”，“冬”】 之（连接：“-”）  ->  “春-夏-秋-冬”`

- _之_ `（合并：‹数组1›，‹数组2›，...）`

  * 将此数组的内容与参数内数组内的内容合并，形成一个新的数组。

  > `【“天”，“地”】之（合并：【“玄”，“黄”】，【“测试”】）   ->    【“天”，“地”，“玄”，“黄”，“测试”】`

- _之_ `（包含：‹元素›）`

  * 返回某个数组里面是否存在此元素。返回 `真` 或者 `假`。

  > `【2，4，6】之（包含：6）  ->   真`

- _之_ `（寻找：‹元素›）`

  * 寻找某个数组里面是否存在此元素，如果有则返回其第一个出现的值所对应的索引，如果无则返回 `-1`。

  > `【2，4，6】之（寻找：6）  ->   1`

## 列表内置属性及方法

### 属性篇

- _之_ `数目`，<sup>又</sup> `长度`
  
  * 返回此列表里面的键值对个数。返回值类型为数值。
  
  > `【“春” == “夏”，“秋” == “冬”】之数目   ->  2`

- _之_ `所有索引`

  * 返回此列表里面的所有索引。返回值类型为数组。

  > `【“春” == “雨”，“秋” == “风”】之所有索引   ->  【“春”，“秋”】`

- _之_ `所有值`
  
  * 返回此列表里面的所有值。返回值类型为数组。

  > `【“春” == “雨”，“秋” == “风”】之所有值   ->  【“雨”，“风”】`

### 方法篇

- _之_ `（读取：‹索引名›）`

  * 读取此列表中索引名称所对应的值，如果不存在则返回 `空`（而不是直接抛出异常）  
  * 注意：索引名须为字符串类型

  > `【“春” == “小雨”，“夏” == “酷暑”】之（读取：“春”）   ->   “小雨”`

- _之_ `（写入：‹索引名›，‹值›）`

  * 将此列表中某个索引名称所对应的值改成给定的新值。返回写入的新值 。

  > `【“春” == “小雨”，“夏” == “酷暑”】之（写入：“春”，“大雨”）   ->   “大雨”`