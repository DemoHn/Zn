# 标准库

本章主要介绍 Zn 语言自带的标准库。为方便实际用户开发实际应用，Zn 提供从文件读写到HTTP服务等一系列常用方法。使用这些方法时，无需下载第三方库文件，只要在代码中写上相应的引用语句即可。

导入一个标准库的语句为 `导入〔标准库名〕`，标准库名需要在前后各加一个书名号(`《 》`)。在执行了 `导入` 语句后，此标准库中的所有方法及常量等均加载至当前上下文 (context) 中，后续逻辑可以直接使用对应的方法。试举一例说明：

> 假设有一个名为 `JSON` 的标准库，其中有两个方法分别为：`解析JSON` 和 `生成JSON`. 我们需要调用其中的 `解析JSON` 方法将一串JSON格式的文本转换成一个列表类型的值.就可以用下面的代码实现：
> ```zn
> 导入《JSON》     注1：使用导入语句将《JSON》中的两个方法都加载进来
> 
> （解析JSON：「 {"A":120} 」）  注2：「返回值为 【「A」 == 120】 」
> ```
>

目前 Zn 支持的所有标准库如下所示：

| 标准库名称 |   说明   |
|:----------:|-------------|
| JSON | 按照 RFC7159 标准解析以及生成JSON字符串 |
| 文件 | 提供文件读写、修改、查看信息、读取文件列表等操作 |

## 标准库文档


## 《JSON》

JSON<sup>[1]</sup> 是在WEB开发中常用的数据表达格式.相对于XML，JSON因其相对简洁的格式受到了越来越广泛的应用，尤其是在接口的返回值中.一个符合标准的JSON字符串如下所示：

```
{"name": "Zn","number": 1200, "list": ["A", "B", "C"]}
```

JSON 格式的数据可以与 Zn 的列表对象互相转换.事实上JSON数据的每一项，都对应着列表对象中的键值对：冒号前面的数据代表 `索引`，冒号后面的数据代表着 `值`. 上述的JSON字符串可以转换成下面的 Zn 列表对象：

```zn
【
    「name」==「Zn」，
    「number」== 1200，
    「list」==【「A」，「B」，「C」】
】
```
JSON标准中对应的类型在 Zn 类型中皆有对应的类型表示，具体对应关系如下表如示：

| JSON 数据类型 | Zn 数据类型 | 示例 |
|:------------:|:----------:|----------|
| `string` | `文本`| "text" --> 「text」|
| `number`| `数值` | 2.56  --> 2.56 |
| `boolean` | `二象` | true --> 真 |
| `null` | 空 | null --> 空 |
| `array`| `数组` | [1, 2, 3] --> 【1，2，3】|
| `object` | `列表` | {"x": "y"}  --> 【「x」== 「y」】 |

> 值得注意的是，因为计数方式的不同，JSON 中的 Number 类型和数值类型互转时可能会出现精度丢失的现象.

### 所有方法

- _之_ `（解析JSON：‹JSON字符串›）` _得到_ `‹列表›`

    解析一个 JSON 字符串，将其转换成对应的列表. 如果解析的JSON字符串格式有误，则会直接抛出异常. 示例：

    ```zn
    令输入 为「{"名称": "ESP8266 Wi-Fi模块", "价格": 1.5, "标签": ["平","靓", "正"]}」
    令结果 为（解析JSON：输入）

    注1：「返回结果为：
        【
            「名称」 == 「ESP8266 Wi-Fi模块」，
            「价格」== 1.5，
            「标签」==【「平」，「靓」，「正」】
        】
    」
    ```

- _之_ `（生成JSON：‹列表›）` _得到_ `‹JSON字符串›`

    传入一个列表对象，将其序列化成一个符合JSON标准的字符串. 示例：

    ```zn
    令输入 为【
        「名称」 == 「ESP8266 Wi-Fi模块」，
        「价格」== 1.5，
        「标签」==【「平」，「靓」，「正」】
    】
    令结果 为（生成JSON：输入）

    注1：「返回结果为：{"名称": "ESP8266 Wi-Fi模块", "价格": 1.5, "标签": ["平","靓", "正"]}」
    ```

## 《文件》

此标准库提供了一部分文件操作的能力. 用户可以对某个文件进行读取和写入操作. 目前支持及文本（UTF-8编码）及二进制流的数据.

> 文件API 共分为 「基础」、「中等」、「专业」三个级别；请按需使用

### 所有方法

- _之_ `（读取文件：‹文件名›）` _得到_ `‹文本内容›`

- _之_ `（写入文件：‹文件名›、‹写入文本›）`

- _之_ `（读取目录：‹目录名›）` _得到_ `‹文件/目录名列表›`

// 打开文件流  打开文件描述符
### 参考资料

[1] [RFC4627](https://datatracker.ietf.org/doc/html/rfc4627)