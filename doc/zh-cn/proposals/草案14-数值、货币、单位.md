| 档案编号   | 作者   | 提案时间  | 状态     |
| :--------: | :----: | :-------: | :------: |
| 〔草案14〕 | DemoHn | 2025-8-19 | DRAFTING |

### 数值的拓展

* 我们需要在传统的数值定义下（float64 etc.） 扩展它：数值是可以带单位的！ 
* 因此，12.5 是数值，12.5kg 也是数值， 甚至 12.5kg/CBM 也是数值

公式：

`数值 = 数字 + 乘法单位 + 除法单位`

举几个例子：

1. 单纯的数值，如 `120`，`-87.9`，`2.4*10^8`，数字即是 `120` etc.. ；`乘法单位` = 空，`除法单位` = 空

2. 带单位的数值，如 `80kg`，`80m`，数字即是 `80`，`乘法单位` = kg，`除法单位` = 空  注：单位和数值之间可以带空格！

2. 带除法单位的数值，如 `80kg/CBM`，`80m/s`，数字即是 `80`，`乘法单位` = kg，`除法单位` = CBM  注：`/` 左右两边不能带空格！

* 单位不能单独存在，前面必须要跟个数字，如 `1kg`，单独的 `kg` 会被认定为标识符！

### 带单位的四则运算：

##### 加减法

1. 单纯的数值，和正常运算一样，如 `20 + 30 - 2 -> 48`
2. 相同系列的单位，可以互相运算，最终结果以最后一个数值的单位为准，如： `2.0CBM + 3.3CBM -> 5.3CBM`；`2.3kg + 500g -> 2800g`； 但是 `2kg + 3m` 是不成立的！！ 诸如 `2 + 3CBM` 也是不成立的！
    - `3.6km/h + 4.0m/s -> 5.0m/s`  -> 会自动把 km/h -> m/h -> m/s

##### 乘除法

1. `1m * 1m * 1m -> 1m³`？ 没有这回事！
2. 带单位的数值可以乘、除单纯的数值作为系数，如 `2 * 3m -> 6m`，`3 * 4kg -> 12kg`， `2.5km/s / 2 -> 1.25km/s`
3. 带单位的数值之间不可以做乘法 & 除法！
  - 唯一的例外：`2km/h * 15min = 0.5km`

##### `%` 和 `|` 运算符

左右两边必须是单纯的数值才有效果

### 单位的定义

```
度量CBM：
    其单位值 = 1 CBM    // 定义基准单位

度量立方米：
    其单位值 = 1 CBM   // 定义别名：自动推导出 1CBM = 1立方米

度量立方厘米：
    其单位值 = 1*10^-6 CBM  // 自动关联换算： 1 cm³ = 10^-6 m³

度量kg：
    其单位值 = 1 kg  // 另外一套单位制，和前述长度无关

度量吨：
    其单位值 = 1000 kg
```

### 货币

`货币 = 币种 + 数字 + 进度 + 除法单位`

* 货币不允许`乘法单位`的存在！诸如 `$20 kg` 是不允许的！ 
* 货币允许 `除法单位`的存在！诸如 `$20/CBM` 是允许的！

```
CNY$20.3  -> 货币代码 + $ + 数字   // 通用格式
$20.3  -> USD 20.3 // $ 单用就表示USD
US$20.3
USD$20.3

€20.3 -> EUR 20.3
¥20.3 -> CNY 20.3
```

* 货币默认精度：小数点后2位；提升精度：多谢几个0，如 `$20.0000` -> 小数点后4位