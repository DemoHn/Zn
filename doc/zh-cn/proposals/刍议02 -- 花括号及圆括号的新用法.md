| 档案编号| 作者| 提案时间 | 状态 |
|:----:|:----:|:----:|:----:|
|〔刍议02〕| DemoHn | 2020-01-16| 已接受 |

## 简介

本草案重新定义 _圆括号对_ `（ ）` 及 _花括号对_ `{ }` 的使用方法，并阐述了这次调整的背景和原因。

重新定义后的使用方法如下所示：
- _圆括号对_ 仅用作函数调用表达式之标识。
- _花括号对_ 仅用作表达式之结合，如数学上 `(2+2)*3` 的用法。

## 背景

在早期的设计当中，方法（函数）的调用是非常简单的：
```zn
‹标识符›：‹参数1›，‹参数2›，‹参数3›...

例： 计算利率：230000，12.5%，「贷款」
或者当不需要提供参数时，直接用 ‹标识符› 表示

例：调用参数
```
_圆括号对_ 的使用和一般编程语言里的 _括号_ 用法相同，都用来括住某一个表达式。

原有的调用函数语句有如下几个问题:

1. 当不需要提供参数时，一个调用函数表达式和一个变量从语法上是完全一样的！
> 如 `当前时间` 既有可能是函数表达式，又有可能是一个变量名！

2. 当函数表达式作为条件语句里的内容时，容易导致混淆的问题：
```zn
如果通过压力测试：230_0000，5.2%，50000：
    ‹表达式›
```
此时很难分清表达式到底是 `如果通过压力测试：` 还是 `如果通过压力测试：230_0000，5.2%, 50000：`。

3. 前面有 `对于`，`以`时，与参数无法区分：
```zn
对于程序员通过压力测试：230_0000， 5.2%，50000
```

中间的 `程序员通过压力测试` 是无法被分词器解析成 `程序员 通过压力测试` 的！

本草案正于基于以上缘由，方对前述语法进行调整，下文具陈之。

### **_圆括号对的新用法_**
- 将函数表达式修改成如下格式，也就是在两边加上一对圆括号：

```zn
（‹标识符›：‹参数1›，‹参数2›，‹参数3›...）
```
_或_
```zn
（‹标识符›）
```
_例如：_
```zn
（通过压力测试：230_0000， 5.2%，50000）
（取得当前时间）
```

这个设计一举解决了前述三个问题：

- 对于_问题1_，判断一个标识符是不是函数表达式，只要看外面有没有圆括号就可以了，如下面的代码所示：
```zn
当前时间   =>   标识符
（当前时间） =>  函数表达式
```

- 对于 _问题2_，由于有括号的存在，自然就不会混淆，如下所示：
```zn
如果（通过压力测试：230_0000，5.2%，50000）：
    ‹语句...›

（通过压力测试：230_0000，5.2%，（取得当前工资））
```

- 对于 _问题3_，前面有 `以` `对于` 时也可以轻易区分左右表达式：
```zn
对于程序员以230_0000（通过压力测试：5.2%，50000）
```

### **_花括号对的新用法_**

我们用 _花括号对_ `{ }` 来表示表达式的组合：
```zn
{ ‹表达式› }
```
花括号内的表达式优先级最高，如同数学中 `(2+2)*3` 一般。

_例如：_
```zn
令结果为{A或B}且C
```

此设计基于以下三点原因：

- 在中文输入法之下花括号也可以直接打出。
- 花括号对是半角字符，表达式间显示会更紧密一些（意味着表达式之疏离感更少）。
- Zn 语言中并不需要像 `C`, `Go`, `Javascript` 等语言一样用花括号对来表示语句块的边界（偏个题：倒是和 `Python` 一样用缩进表示）。

> 2020-03-14 DemoHn注： 这份文档最写成于 2020-01-16，其时还没有 `#{` `}` 这样的语法。届时需要注意和 `HashMap#{Expr}` 的区别！
