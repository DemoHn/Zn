# 第5章：数值的运算及比较

数值类型通常用于表示 _一个整数或小数，_ 比如箱子长度、货件数量、商品价格、贷款利率等等；数值之间可以正常进行加、减、乘、除等数值运算，亦可相互比较大小，从而判断出某个结论 —— 对于计算机而言，做算术那可是最擅长的事情啦！

### 数值的表示
在 zinc 语言中，表示一个数值的方式很简单：输入一串阿拉伯数字即可；更加严格地说，即是定义一个只包含阿拉伯数字以及小数点等特殊符号的**标识符**。数值类型有以下三种表示形式：

1) **整数**
   整数包括正整数、负整数和 `0`。如要表示负整数，即在数字前加 `-` 号即可。整数的例子：`0`， `12580`，`-87`，`+68`。

2) **小数**
   小数和日常表示方法一致，都是在数字中间加小数点(`.` )。如 `2.5`，`-0.003`，`-0.732`。

3) **科学计数法**
   科学计数法可以方便地表示一个非常大或者非常小的数值（比如说 `1000000000` ，或者 `0.00000000003` 这种），其基本原理是在前面用一个小数 _a_ 来表示 (`1 <= |a| < 10`)，后面再跟上指数幂 _n_。其最终值为 a × 10的n次方。自然，在幂次的底数只能是 `10`，而不能定义其他数。

   使用科学计数法表示一个数值时，需要在小数 _a_ 和指数幂 _n_ 之间添加一个幂次符号：`*10^` ，`*^`，`E` 或者 `e`。例如 `1.25*10^8`，`6.02E+23`，`1.602e-19`；需要注意：如果采用 `E` 或者 `e` 作为幂次符号，在幂值部分需要额外添加 `+` 或者 `-` 以表示幂值是正数还是负数。

以下数值都是符合要求的：

| 数值        | 备注                       |
| --------- | ------------------------ |
| 123456    | 正常整数                     |
| -12345    | 前导 - 号                   |
| +12345    | 前导 + 号                   |
| .12       | 等同于 0.12                 |
| 0.000     |                          |
| 0129.8    | 数值前可以加0                  |
| 1.0000    |                          |
| -18.9E-7  |                          |
| -18.9E+27 | 幂后面的系数前面一定要跟 + 号         |
| -18.9e+27 | 中间的 E 也可以是小写             |
| 125*10^12 | 中间只能写 `*10^`，`*9^` 是不支持的 |
| 125*^12   | 可以省略 `10`                |

不符合数值的要求的反例如下：

| 标识符      | 错误原因                   |
|----------|------------------------|
| 0xEF     | 不支持16进制字符的表示           |
| 34.      | 小数点后面需要跟数字             |
| 23..3    | 多个小数点                  |
| 132 3456 | 数字之间不能有空格              |
| 125*8^2  | 只支持 `*10^`             |
| 128E923  | 幂值部分需要加前导符号 `+` 或者 `-` |
| --123    | 前导符号只能有一个              |

### 数值类型的算术运算
创建一个新的数值变量的下一步，即是对数值进行运算。zinc 语言支持的运算方式有加、减、乘、除四种，分别对应 `+` ，`-`，`*`， `/`  四种运算符¹。我们可以利用这四种运算符构建一个表达式，就像是小学所学的算术表达式那样，对多个数值进行运算，最后得到一个同为数值类型的值。

算术表达式的运算顺序亦遵守 “先乘除，后加减” 的原则，如果需要调整运算顺序，只需要在需要调整的数据之间加上 `{ }` 即可 —— 和我们在小学数学中的运算方式是一样的。

试举几个例子：

| 表达式           | 备注                                                    |
|---------------|-------------------------------------------------------|
| `2 + 3 + 5`   | 从左往右依次相加，得到`10`                                       |
| `9 - 3 * 2`   | 依照“先乘除，后加减”的原则，先计算 `3 * 2`得到`6`；<br>再计算 `9 - 6`，得到`3` |
| `{9 - 3} * 2` | 先计算括号内的 `9 - 3` ，得到 `6` ；<br>再计算 `6 * 2` ，得到`12`      |
| `销售额 * 0.25`  | 当变量 `销售额` 是数值类型时，表达式照样成立                              |
| `4 / 8`       | 结果为`0.5` - 除法得到的结果并不会取整                               |
| `17.8 / 7.21` | 结果为 `2.4687933425797506`  - 小数得到的位数是有限的               |

> ⚠️ 尽管 zinc 秉承「非必要不加空格」原则，但是在输入运算表达式时，运算符前后**必须要加上空格**；这是因为 `+ - * /` 本身是可以作为标识符的一部分的，如果不加空格，诸如 `价格/2` 会当作标识符本身，而出现不符合预期的结果！

_**关于除法：**_ 
zinc 语言支持两种除法运算符：一般除法 `/` ，以及整除 `|`。前者沿用一般的除法法则，结果是一个整数或者小数；后者会将除法得到的结果*向下取整*，比如 `8 / 2.5 -> 3.2`，那么 `8 | 2.5 -> 3` （将 `3.2` 向下取整即是 `3`）。

与之配套的是取余运算符 `%` ，它的作用是得到一个数被另外一个数整除之后的余数，亦即 `A % B = A - A | B`。比如 `8 % 3 -> 2`，`8 % 2.5 -> 0.5`。

下表列举了目前在 zinc 语言中所支持的所有算术运算符，方便读者参考：

| 名称    | 运算符 | 示例               |
|-------|-----|------------------|
| 加法运算符 | `+` | `2 + 2` -> `4`   |
| 减法运算符 | `-` | `8 - 5` -> `3`   |
| 乘法运算符 | `*` | `3 * 4` -> `12`  |
| 除法运算符 | `/` | `5 / 2` -> `2.5` |
| 整除运算符 | \|  | 11 \| 5 -> 2     |
| 取余运算符 | `%` | `11 % 5` -> 1    |

### 数值类型的比较
在 zinc 语言中，我们可以借助*比较运算符*，通过比较数值之间的大小而得到一个`真`或`假`的逻辑值，这个逻辑值通常用于程序的流程控制上，包括条件语句，循环语句等。

目前针对数值类型有五种*比较运算符*：等于、不等于、大于、小于、不大于、不小于；在比较运算符的左边和右边各有一个数值，进行比较操作后得到 `真` 或 `假` 两种结果：以 _大于运算符_ 为例， `2 + 5 > 3` 即得到 `真`；而 `4 + 7 > 20`得到 `假`。

下表列举了目前在 zinc 语言中所支持的所有算术运算符，方便读者参考：

| 名称     | 运算符            | 示例                                 | 备注                   |
|--------|----------------|------------------------------------|----------------------|
| 等于运算符  | `==`  或  `等于`  | `2 + 3 == 5` -> `真` <br>`成本等于24.3` | 是两个`=`号，一个 `=` 号那是赋值 |
| 不等于运算符 | `/=`  或  `不等于` | `4 * 8 /= 30`                      |                      |
| 大于运算符  | `>` 或 `大于`     | `4 * 8 > 30` -> `真`<br>`4 * 8大于30` | `>` 需要切换英文输入法输入      |
| 小于运算符  | `<`  或  `小于`   | `4 * 5 < 30`<br>`4 * 5小于30`        |                      |
| 不大于运算符 | `<=` 或 `不大于`   | `4 * 5 <= 30`                      | 不大于等价于 _小于或等于_       |
| 不小于运算符 | `>=` 或 `不小于`   | `4 * 8 >= 30`                      | 不小于等价于 _大于或等于_       |

### 附录：数值的表示范围及误差
在前面的内容中，我们提到了“数值类型可以表示一个整数或小数”，这似乎暗示着数值类型可以表示实数域上的所有数 —— 事实显然并非如此。在 zinc 语言中，数值类型的底层采用 [IEEE 754 64-bit 浮点数](https://zh.wikipedia.org/wiki/IEEE_754) 表示；它的具体细节这里不再展开，但有两点结论需要注意：
1. 数值类型的表示范围是有限的：其范围大概在 ±2.23*10^-308 ~ ±1.8**10^308 之间，当然 `0` 是可以表示的。
2. 数值类型无法精确表示一个小数：诸如 `0.873` 这样的有限位数之小数，在实际表示时是存在大约 10^-16 量级的误差的。

在绝大多数情况下，使用 _数值类型_ 是完全没有问题的；但是在某些特殊场景下（比如要求非常精确的数学运算），使用常规的 _数值类型_ 就不太合适了。



---- 
注1：在我们经常使用的美式键盘布局中，这四种运算符的位置分别如下所示：
	a. `+`  位于按键 `0` 右边两个按键， `=` 上方，输入 `Shift` + `=` 即可。
	b. `-`  位于按键 `0` 右边一个按键，直接输入 `-` 即可。
        c. `*`  位于按键 `8`上方，输入 `Shift` + `8` 即可。
	d. `/` 位于按键 `M` 右边三个按键，`?` 下方，直接输入 `/` 即可。